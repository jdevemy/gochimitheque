//- extends ../base.jade
include ../mixins
block CONTENT
    :go:func
        Productindex(c ViewContainer)

    #accordion
        #list-collapse.collapse.show(data-parent='#accordion')
            //- header.row
            //-     .col-sm-12
            table#Product_table(
                        data-striped='true'
                        data-search='false'
                        data-pagination-v-align='both'
                        data-toolbar="#toolbar"
                        data-side-pagination='server'
                        data-page-list="[5, 10, 20, 50, 100]"
                        data-pagination='true'
                        data-ajax='Product_getTableData'
                        data-query-params='Product_dataQueryParams'
                        data-sort-name='name.name_label'
                        data-detail-view="true"
                        data-detail-formatter="Product_detailFormatter"
                        data-classes="table table-hover")
                thead
                    tr
                        // th(data-field='product_id' data-sortable='true') ID
                        th.th-product-name(data-field='name.name_label' data-sortable='true')
                            = T("product_name_table_header", 1)
                        th(data-field='empiricalformula.empiricalformula_label' data-sortable='true' data-formatter='Product_empiricalformulaFormatter')
                            = T("product_empiricalformula_table_header", 1)
                        th(data-field='casnumber.casnumber_label' data-sortable='true' data-formatter='Product_casnumberFormatter')
                            = T("product_cas_table_header", 1)
                        th(data-field='product_specificity' data-sortable='false' data-formatter='Product_productspecificityFormatter')
                            = T("product_specificity_table_header", 1)
                        th(data-field='product_sl' data-formatter='Product_productslFormatter' data-sortable='false') 
                        th.th-product-operate(data-field='operate' data-formatter='Product_operateFormatter' data-events='operateEvents') 

        #edit-collapse.collapse(data-parent='#accordion')

            +titleicon(iconitem="tag" label="product_update_title")

            form#product
                input#index(type='hidden', name='index', value='')
                input#product_id(type='hidden', name='product_id', value='')

                input#exactMatchEmpiricalFormula(type="hidden")
                input#exactMatchLinearFormula(type="hidden")
                input#exactMatchCasNumber(type="hidden")
                input#exactMatchCeNumber(type="hidden")
                input#exactMatchName(type="hidden")
                input#exactMatchClassOfCompound(type="hidden")
                input#exactMatchPhysicalState(type="hidden")
                input#exactMatchProducerRefs(type="hidden")
                input#exactMatchProducer(type="hidden")
                input#exactMatchSupplierRefs(type="hidden")
                input#exactMatchSupplier(type="hidden")
                input#exactMatchTag(type="hidden")
                input#exactMatchCategory(type="hidden")

                .form-row
                    .form-group.col-sm-6
                        +select(label="category_label_title" name="category")
                    .form-group.col-sm-6
                        +selectmultiple(label="tag_label_title" name="tags")

                .form-row
                    .form-group.col-sm-6
                        +selectrequired(label="name_label_title" name="name")
                    .form-group.col-sm-6
                        +selectmultiple(label="synonym_label_title" name="synonyms")

                // bio
                .form-row.bio.collapse
                    .form-group.col-sm-6
                        +selectrequired("producerref_label_title", "producerref")
                    .form-group.col-sm-6
                        +select("producer_label_title", "producer")
                .form-row.bio.collapse
                    .form-group.col-sm-5.offset-sm-6
                        +inputtext("add_producer_title", "addproducer")
                    .form-group.col-sm-1.align-self-end
                        button.btn.btn-primary(type="button" onclick="Product_addProducer()")
                            span.mdi.mdi-plus-circle

                // bio
                .form-row.bio.collapse
                    .form-group.col-sm-6
                        +selectmultiple("supplierref_label_title", "supplierrefs")
                    .form-group.col-sm-6
                        +select("supplier_label_title", "supplier")
                .form-row.bio.collapse
                    .form-group.col-sm-5.offset-sm-6
                        +inputtext("add_supplier_title", "addsupplier")
                    .form-group.col-sm-1.align-self-end
                        button.btn.btn-primary(type="button" onclick="Product_addSupplier()")
                            span.mdi.mdi-plus-circle

                // bio
                .form-row.bio.collapse
                    .form-group.col-sm-6
                        +inputnumber("product_temperature_title", "product_temperature", "any", "-10000000", "10000000", "")
                    .form-group.col-sm-6
                        +select("unit_label_title", "unit_temperature")

                .form-row.chem.collapse
                    .form-group.col-sm-12
                        button.btn.btn-primary(type="button" onclick="noEmpiricalFormula()")
                            span.mdi.mdi-24px.mdi-cursor-default-click-outline &nbsp;
                            = T("no_empirical_formula", 1 )

                .form-row.chem.collapse
                    .form-group.col-sm-6
                        +selectrequired("empiricalformula_label_title", "empiricalformula")
                    .form-group.col-sm-6
                        +select("linearformula_label_title", "linearformula")

                .form-row.chem.collapse.float-right
                        span#convertedEmpiricalFormula
                        button.btn.btn-primary(type="button" onclick="Product_linearToEmpirical()")
                            span.mr-sm-2.mdi.mdi-restart
                            = T("empirical_formula_convert", 1 )

                .form-row.chem.collapse
                    .form-group.col-sm-6
                        +inputfile("product_twodformula_title", "product_twodformula")
                        +inputhidden("product_twodformula_content", "")

                .form-row.chem.collapse
                    .form-group.col-sm-12
                        button.btn.btn-primary(type="button" onclick="Product_noCas()")
                            span.mdi.mdi-24px.mdi-cursor-default-click-outline &nbsp;
                            = T("no_cas_number", 1 )

                .form-row.chem.collapse
                    .form-group.col-sm-6
                        +selectrequired("casnumber_label_title", "casnumber")
                    .form-group.col-sm-6
                        +select("cenumber_label_title", "cenumber")

                .form-row.chem.collapse
                    .form-group.col-sm-12
                        +inputtext("product_specificity_title", "product_specificity")

                .form-row
                    .form-group.col-sm-6
                        +inputtext("product_msds_title", "product_msds")
                    //bio
                    .form-group.col-sm-6
                        +inputtext("product_sheet_title", "product_sheet")

                .form-row
                    .form-group.col-sm-6
                        +inputtext("product_threedformula_title", "product_threedformula")
                    .form-group.col-sm-6
                        //- +inputfile("product_threedformula_mol_title", "product_molformula")
                        //- +inputhidden("product_molformula_content", "")

                .form-row
                    .form-group.col-sm-6
                        +select("physicalstate_label_title", "physicalstate")
                    .form-group.col-sm-6
                        +selectmultiple("classofcompound_label_title", "classofcompound")  

                .form-row
                    .form-group.col-sm-12
                        button.btn.btn-light(type="button" onclick="Product_howToMagicalSelector()")
                            span.mdi.mdi-24px.mdi-cursor-default-click-outline &nbsp;
                            = T("howto_magicalselector", 1 )

                .form-row
                    .form-group.col-sm-11.d-flex.align-items-end
                        +inputtextarea("magical_selector", "magical")
                    .form-group.col-sm-1.d-flex.align-items-end
                        button#magical-button(type="button" onclick="Product_magic();")
                            span.mdi.mdi-24px.mdi-auto-fix

                .form-row
                    .form-group.col-sm-6
                        +select("signalword_label_title", "signalword")
                    .form-group.col-sm-6
                        +selectmultiple("symbol_label_title", "symbols")

                .form-row
                    .form-group.col-sm-6
                        +selectmultiple("hazardstatement_label_title", "hazardstatements")
                    .form-group.col-sm-6
                        +selectmultiple("precautionarystatement_label_title", "precautionarystatements")

                .form-row
                    .form-group.col-sm-4
                        +checkboxicon("product_restricted_title", "product_restricted", "mdi-hand")
                    .form-group.col-sm-4
                        +checkboxicon("product_radioactive_title", "product_radioactive", "mdi-radioactive")

                .form-row
                    .form-group.col-sm-12
                        +inputtextarea("product_disposalcomment_title", "product_disposalcomment")
                .form-row
                    .form-group.col-sm-12
                        +inputtextarea("product_remark_title", "product_remark")

                button#save.btn.btn-link(type='button', onclick='Product_saveProduct()')
                    span.mdi.mdi-content-save.mdi-24px.iconlabel
                        = T("save", 1)

                button.btn.btn-link(type='button', onclick='closeEdit();')
                    span.mdi.mdi-close-box.mdi-24px.iconlabel
                        = T("close", 1)

block CONTENTJS
    script.
        window.operateEvents = {
            "click .bookmark": function (e, value, row, index) {
                Product_operateEventsBookmark(e, value, row, index)
            },
            "click .store": function (e, value, row, index) {
                Product_operateEventsStore(e, value, row, index)
            },
            "click .storages": function (e, value, row, index) {
                Product_operateEventsStorages(e, value, row, index)
            },
            "click .ostorages": function (e, value, row, index) {
                Product_operateEventsOStorages(e, value, row, index)
            },
            "click .productedit": function (e, value, row, index) {
                Product_operateEventsEdit(e, value, row, index)
            },
            "click .productdelete": function (e, value, row, index) {
                Product_operateEventsDelete(e, value, row, index)
            }
        }